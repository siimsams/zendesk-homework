I used weighted average to calculate the percentages. 

TODO: 
- Add tests
- Optimize queries and add indexes
- Add function to generate JWT for testing
- Make it Kubernetes friendly
